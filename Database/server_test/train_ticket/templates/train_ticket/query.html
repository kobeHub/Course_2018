{% extends 'train_ticket/base.html' %}
{% load static %}
{% block title %}index{% endblock %}

{% block content%}
    <div class="row-fluid">
        <div class="container">
            <legend>单程票</legend>
            <table class="table">
                <thead>
                    <th scope="col">车次</th>
                    <th scope="col">出发站</th>
                    <th scope="col">到达站</th>
                    <th scope="col">出发/到达时间</th>
                    <th scope="col">商务座</th>
                    <th scope="col">一等座</th>
                    <th scope="col">二等座</th>
                    <th scope="col">软卧</th>
                    <th scope="col">硬卧</th>
                    <th scope="col">软座</th>
                    <th scope="col">硬座</th>
                </thead>
                {% for key, value in query_set_single.items %}
                <tbody>
                    <tr>
                        <th scope="row">{{value.train_name}}</th>
                        <td>{{value.start_station}}</td>
                        <td>{{value.end_station}}</td>
                        <td>{{value.start_time}}/{{value.end_time}}</td>
                        <td>{{value.swz}}</td>
                        <td>{{value.ydz}}</td>
                        <td>{{value.edz}}</td>
                        <td>{{value.rw}}</td>
                        <td>{{value.yw}}</td>
                        <td>{{value.rz}}</td>
                        <td>{{value.yz}}</td>
                        <td>
                            <div class="nav-item dropdown">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    预定
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    {% if value.swz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'SWZ' value.start_station value.start_time value.end_station value.end_time %}">商务座</a>
                                    {% endif %}
                                    {% if value.ydz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YDZ' value.start_station value.start_time value.end_station value.end_time %}">一等座</a>
                                    {% endif %}
                                    {% if value.edz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'EDZ' value.start_station value.start_time value.end_station value.end_time %}">二等座</a>
                                    {% endif %}
                                    {% if value.rw > 0 %}
                                    <a class="dropdown-item" href="{%  url 'train_ticket:book_ticket' key 'RW' value.start_station value.start_time value.end_station value.end_time%}">软卧</a>
                                    {% endif %}
                                    {% if value.yw > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YW' value.start_station value.start_time value.end_station value.end_time %}">硬卧</a>
                                    {% endif %}
                                    {% if value.rz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'RZ' value.start_station value.start_time value.end_station value.end_time%}">软座</a>
                                    {% endif %}
                                    {% if value.yz > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YZ' value.start_station value.start_time value.end_station value.end_time%}">硬座</a>
                                    {% endif %}
                                </div>
                            </div>
                        </td>
                     </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row-fluid">
        {% if query_set_double %}
        <div class="container">
            <legend>返程票</legend>
            <table class="table">
                <thead>
                    <th scope="col">车次</th>
                    <th scope="col">出发站</th>
                    <th scope="col">到达站</th>
                    <th scope="col">出发/到达时间</th>
                    <th scope="col">商务座</th>
                    <th scope="col">一等座</th>
                    <th scope="col">二等座</th>
                    <th scope="col">软卧</th>
                    <th scope="col">硬卧</th>
                    <th scope="col">软座</th>
                    <th scope="col">硬座</th>
                </thead>
                {% for key, value in query_set_double.items %}
                <tbody>
                    <tr>
                        <th scope="row">{{value.train_name}}</th>
                        <td>{{value.start_station}}</td>
                        <td>{{value.end_station}}</td>
                        <td>{{value.start_time}}/{{value.end_time}}</td>
                        <td>{{value.swz}}</td>
                        <td>{{value.ydz}}</td>
                        <td>{{value.edz}}</td>
                        <td>{{value.rw}}</td>
                        <td>{{value.yw}}</td>
                        <td>{{value.rz}}</td>
                        <td>{{value.yz}}</td>
                        <td>
                            <div class="nav-item dropdown">
                                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    预定
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    {% if value.swz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'SWZ' value.start_station value.start_time value.end_station value.end_time%}">商务座</a>
                                    {% endif %}
                                    {% if value.ydz > 0 %}
                                    <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YDZ' value.start_station value.start_time value.end_station value.end_time%}">一等座</a>
                                    {% endif %}
                                    {% if value.edz > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'EDZ' value.start_station value.start_time value.end_station value.end_time%}">二等座</a>
                                    {% endif %}
                                    {% if value.rw > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'RW' value.start_station value.start_time value.end_station value.end_time%}">软卧</a>
                                    {% endif %}
                                    {% if value.yw > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YW' value.start_station value.start_time value.end_station value.end_time%}">硬卧</a>
                                    {% endif %}
                                    {% if value.rz > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'RZ' value.start_station value.start_time value.end_station value.end_time%}">软座</a>
                                    {% endif %}
                                    {% if value.yz > 0 %}
                                        <a class="dropdown-item" href="{% url 'train_ticket:book_ticket' key 'YZ' value.start_station value.start_time value.end_station value.end_time%}">硬座</a>
                                    {% endif %}
                                </div>
                            </div>
                        </td>
                     </tr>
                </tbody>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    </div>
{% endblock %}
{% block script%}
<script>

    $(".btn").click(function(){
        console.log('test');
        $(this).button('loading').delay(1000).queue(function() {
        // $(this).button('reset');
        // $(this).dequeue(); 
        });
    });

</script>
{% endblock%}
